<!DOCTYPE html>
<html lang="en">

<head>
    <title>paymentorder</title>
    <script src="js/jquery.min.js"></script>
    <link rel="stylesheet" href="css/bulma.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
</head>

<body>
    <section class="section">
        <div class="container">
            <div id="paymentMenu" class="tile is-child box">
                <p class="title">Paymentmenu</p>
            </div>
        </div>
    </section>
</body>


<script src="{{ paymentmenu }}"></script>
<script language="javascript">
    "use strict";

    let stylevariable = `
    {
        "style": {
            "body": {
                "backgroundColor": "#555",
                "color": "#bbb"
            },
            "button": {
                "backgroundColor": "#36ac4c",
                "color": "#fff"
            },
            "secondaryButton": {
                "backgroundColor": "#555",
                "border": "solid 1px #bbb"
            },
            "formGroup": {
                "color": "#bbb",
                "backgroundColor": "#555"
            },
            "label": {
                "color": "#bbb"
            }
        }    
    }`;

    let config = {
        container: "paymentMenu",
        onPaymentCompleted: function (paymentCompletedEvent) {
            // event handling
            // please read: https://developer.payex.com/xwiki/wiki/developer/view/Main/ecommerce/technical-reference/payment-orders-resource/#HPaymentMenuEvents
            // please read: https://developer.payex.com/xwiki/wiki/developer/view/Main/ecommerce/payex-checkout-main/payex-checkout-anonymous-payments/
            alert("purchase completed");
        },
        onPaymentFailed: function (paymentFailedEvent) {
            console.log(paymentFailedEvent);
        },
        onPaymentCreated: function (paymentCreatedEvent) {
            console.log(paymentCreatedEvent);
        },
        onPaymentToS: function (paymentToSEvent) {
            console.log(paymentToSEvent);
        },
        onPaymentMenuInstrumentSelected: function (paymentMenuInstrumentSelectedEvent) {
            console.log(paymentMenuInstrumentSelectedEvent);
        },
        onError: function (error) {
            console.error(error);
        },
    };
    payex.hostedView.paymentMenu(config).open();
					//payex.hostedView.paymentMenu().refresh();
					//payex.hostedView.paymentMenu().close();

</script>

<footer class="footer">
    <div class="content has-text-centered">
        <p>
            <strong>checkout in PayEx</strong>
        </p>
    </div>
</footer>

</html>